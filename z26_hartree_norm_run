#!/usr/bin/bash

# Created by: Stephen P. Vicchio

# The purpose of this script is to show the normal mode analysis from gaussian in a way
# that can be easiler seen.
#

molecule=${1}
job_type=${2}
level_theory=${3}

results_dirct=/home/vicchio/puckering/zz_results/2_bxyl
new_results=${molecule}-${job_type}-${level_theory}
out_dirct=9_hartree_norm

if [ "${molecule}" == 'oxane' ] ; then
    status_build=0
    mole_folder=1_oxane
elif [ "${molecule}" == 'bxyl' ] ;  then
	status_build=0
	mole_folder=2_bxyl
else
	echo
	echo "The molecule type is not found in this script"
	status_build=1
fi


if [ ${status_build} == "1" ]; then
	echo
	echo "Something isn't right with the script...the molecule"
	echo "may not be found!"
	echo
	exit
elif [ ${status_build} == "0" ]; then

    if [ ! -d ../${out_dirct} ]; then
        mkdir ../9_hartree_norm
    fi

    hartree norm -d ../8_norm/. -o ../9_hartree_norm/.

    if [ ! -d ${results_dirct}/${new_results}/ ]; then
        mkdir ${results_dirct}/${new_results}/
        mkdir mkdir ${results_dirct}/${new_results}/hartree-files
        mkdir  mkdir ${results_dirct}/${new_results}/log-files
    fi

    cp ../9_hartree_norm/*.txt ${results_dirct}/${new_results}/hartree-files
    cp ../8_norm/*.log ${results_dirct}/${new_results}/log-files
fi


norm_loc=/home/vicchio/codes/qm_utils/qm_utils/norm_analysis.py

ls *.txt > ../9_hartree_norm/z_hartree_norm_analysis_${level_theory}.txt

cd ../9_hartree_norm/

python ${norm_loc} -s z_hartree_norm_analysis_${level_theory}.txt -r '8,1,9,13,17,5'

mv z_norm-analysis_TS_exo_puckers_z_hartree_norm_analysis_am1.txt z_norm_analysis_list_exo-TS_${molecule}_${level_theory}.txt
mv z_norm-analysis_TS_ring_puckers_z_hartree_norm_analysis_am1.txt z_norm_analysis_list_ring-TS_${molecule}_${level_theory}.txt

if [ ! -d ${results_dirct}/${new_results}/ ]; then
    mkdir mkdir ${results_dirct}/${new_results}/log_norm_analysis
fi

cp z_norm_analysis_list_ring-TS_${molecule}_${level_theory}.txt ${results_dirct}/${new_results}/log_norm_analysis
cp z_norm_analysis_list_exo-TS_${molecule}_${level_theory}.txt ${results_dirct}/${new_results}/log_norm_analysis

cd ${results_dirct}/${new_results}/log_norm_analysis

echo $PWD
